function fetchVimeoThumb(){$(".vimeo-player").each(function(){function t(){e.attr("src",videoThumbURL),e.attr("title",videoTitle),e.attr("alt",videoTags)}var e=$(this),n=e.data("vimeoid");$.getJSON("http://vimeo.com/api/v2/video/"+n+".json?callback=?",function(e){videoData=e[0],videoThumbURL=videoData.thumbnail_large,videoTitle=videoData.title,videoTags=videoData.tags,t()})})}function insertVimeoVideo(){$(".vimeo-embed-overlay").click(function(){$(this).fadeOut(),$(this).parent().html('<iframe src="https://player.vimeo.com/video/'+$(this).siblings(".vimeo-player").data("vimeoid")+'?portrait=0&title=0&color=bf1f48&badge=0&byline=0&autoplay=1" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')})}(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;!function(t,e){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function($){return e($,t)}):e(t.jQuery,t)}(window,function($,n){var o,r,i,s,a,l,c,u,f,h,p,d,m,g,v,y;return o=$(n),u=t.call(n,"ontouchstart")>=0,s={horizontal:{},vertical:{}},a=1,c={},l="waypoints-context-id",p="resize.waypoints",d="scroll.waypoints",m=1,g="waypoints-waypoint-ids",v="waypoint",y="waypoints",r=function(){function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+a++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[l]=this.id,c[this.id]=this,t.bind(d,function(){var t;return e.didScroll||u?void 0:(e.didScroll=!0,t=function(){return e.doScroll(),e.didScroll=!1},n.setTimeout(t,$[y].settings.scrollThrottle))}),t.bind(p,function(){var t;return e.didResize?void 0:(e.didResize=!0,t=function(){return $[y]("refresh"),e.didResize=!1},n.setTimeout(t,$[y].settings.resizeThrottle))})}return t.prototype.doScroll=function(){var t,e=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!u||t.vertical.oldScroll&&t.vertical.newScroll||$[y]("refresh"),$.each(t,function(t,n){var o,r,i;return i=[],r=n.newScroll>n.oldScroll,o=r?n.forward:n.backward,$.each(e.waypoints[t],function(t,e){var o,r;return n.oldScroll<(o=e.offset)&&o<=n.newScroll?i.push(e):n.newScroll<(r=e.offset)&&r<=n.oldScroll?i.push(e):void 0}),i.sort(function(t,e){return t.offset-e.offset}),r||i.reverse(),$.each(i,function(t,e){return e.options.continuous||t===i.length-1?e.trigger([o]):void 0})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,e,n,o=this;return n=$.isWindow(this.element),e=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:n?0:e.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:e.top,contextScroll:n?0:this.oldScroll.y,contextDimension:n?$[y]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},$.each(t,function(t,e){return $.each(o.waypoints[t],function(t,n){var o,r,i,s,a;return o=n.options.offset,i=n.offset,r=$.isWindow(n.element)?0:n.$element.offset()[e.offsetProp],$.isFunction(o)?o=o.apply(n.element):"string"==typeof o&&(o=parseFloat(o),n.options.offset.indexOf("%")>-1&&(o=Math.ceil(e.contextDimension*o/100))),n.offset=r-e.contextOffset+e.contextScroll-o,n.options.onlyOnScroll&&null!=i||!n.enabled?void 0:null!==i&&i<(s=e.oldScroll)&&s<=n.offset?n.trigger([e.backward]):null!==i&&i>(a=e.oldScroll)&&a>=n.offset?n.trigger([e.forward]):null===i&&e.oldScroll>=n.offset?n.trigger([e.forward]):void 0})})},t.prototype.checkEmpty=function(){return $.isEmptyObject(this.waypoints.horizontal)&&$.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([p,d].join(" ")),delete c[this.id]):void 0},t}(),i=function(){function t(t,e,n){var o,r;"bottom-in-view"===n.offset&&(n.offset=function(){var t;return t=$[y]("viewportHeight"),$.isWindow(e.element)||(t=e.$element.height()),t-$(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=e,this.enabled=n.enabled,this.id="waypoints"+m++,this.offset=null,this.options=n,e.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,o=null!=(r=this.element[g])?r:[],o.push(this.id),this.element[g]=o}return t.prototype.trigger=function(t){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,n;return(n=t[g])?(e=$.extend({},s.horizontal,s.vertical),$.map(n,function(t){return e[t]})):[]},t}(),h={init:function(t,e){var n;return e=$.extend({},$.fn[v].defaults,e),null==(n=e.handler)&&(e.handler=t),this.each(function(){var t,n,o,s;return t=$(this),o=null!=(s=e.context)?s:$.fn[v].defaults.context,$.isWindow(o)||(o=t.closest(o)),o=$(o),n=c[o[0][l]],n||(n=new r(o)),new i(t,n,e)}),$[y]("refresh"),this},disable:function(){return h._invoke.call(this,"disable")},enable:function(){return h._invoke.call(this,"enable")},destroy:function(){return h._invoke.call(this,"destroy")},prev:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){return e>0?t.push(n[e-1]):void 0})},next:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){return e<n.length-1?t.push(n[e+1]):void 0})},_traverse:function(t,e,o){var r,i;return null==t&&(t="vertical"),null==e&&(e=n),i=f.aggregate(e),r=[],this.each(function(){var e;return e=$.inArray(this,i[t]),o(r,e,i[t])}),this.pushStack(r)},_invoke:function(t){return this.each(function(){var e;return e=i.getWaypointsByElement(this),$.each(e,function(e,n){return n[t](),!0})}),this}},$.fn[v]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],h[n]?h[n].apply(this,t):$.isFunction(n)?h.init.apply(this,arguments):$.isPlainObject(n)?h.init.apply(this,[null,n]):$.error(n?"The "+n+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},$.fn[v].defaults={context:n,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},f={refresh:function(){return $.each(c,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=n.innerHeight)?t:o.height()},aggregate:function(t){var e,n,o;return e=s,t&&(e=null!=(o=c[$(t)[0][l]])?o.waypoints:void 0),e?(n={horizontal:[],vertical:[]},$.each(n,function(t,o){return $.each(e[t],function(t,e){return o.push(e)}),o.sort(function(t,e){return t.offset-e.offset}),n[t]=$.map(o,function(t){return t.element}),n[t]=$.unique(n[t])}),n):[]},above:function(t){return null==t&&(t=n),f._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return null==t&&(t=n),f._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return null==t&&(t=n),f._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return null==t&&(t=n),f._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return f._invoke("enable")},disable:function(){return f._invoke("disable")},destroy:function(){return f._invoke("destroy")},extendFn:function(t,e){return h[t]=e},_invoke:function(t){var e;return e=$.extend({},s.vertical,s.horizontal),$.each(e,function(e,n){return n[t](),!0})},_filter:function(t,e,n){var o,r;return(o=c[$(t)[0][l]])?(r=[],$.each(o.waypoints[e],function(t,e){return n(o,e)?r.push(e):void 0}),r.sort(function(t,e){return t.offset-e.offset}),$.map(r,function(t){return t.element})):[]}},$[y]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],f[n]?f[n].apply(null,t):f.aggregate.call(null,n)},$[y].settings={resizeThrottle:100,scrollThrottle:30},o.on("load.waypoints",function(){return $[y]("refresh")})})}).call(this),function(){var t,e;t=function(){function t(t,e){var n,o;if(this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1},"object"==typeof t)for(n in t)o=t[n],this.options[n]=o;this.context=null!=e?e:this,this.unique=this._genKey()}return t.prototype.hasNext=function(){return"string"==typeof this.context.nextUrl&&this.context.nextUrl.length>0},t.prototype.next=function(){return this.hasNext()?this.run(this.context.nextUrl):!1},t.prototype.run=function(e){var n,o,r;if("string"!=typeof this.options.clientId&&"string"!=typeof this.options.accessToken)throw new Error("Missing clientId or accessToken.");if("string"!=typeof this.options.accessToken&&"string"!=typeof this.options.clientId)throw new Error("Missing clientId or accessToken.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&(r=document.createElement("script"),r.id="instafeed-fetcher",r.src=e||this._buildUrl(),n=document.getElementsByTagName("head"),n[0].appendChild(r),o="instafeedCache"+this.unique,window[o]=new t(this.options,this),window[o].unique=this.unique),!0},t.prototype.parse=function(t){var e,n,o,r,i,s,a,l,c,u,f,h,p,d,m,g,v,y,w,b,T,k;if("object"!=typeof t){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(200!==t.meta.code){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,t.meta.error_message),!1;throw new Error("Error from Instagram: "+t.meta.error_message)}if(0===t.data.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,t),this.context.nextUrl="",null!=t.pagination&&(this.context.nextUrl=t.pagination.next_url),"none"!==this.options.sortBy)switch(d="random"===this.options.sortBy?["","random"]:this.options.sortBy.split("-"),p="least"===d[0]?!0:!1,d[1]){case"random":t.data.sort(function(){return.5-Math.random()});break;case"recent":t.data=this._sortBy(t.data,"created_time",p);break;case"liked":t.data=this._sortBy(t.data,"likes.count",p);break;case"commented":t.data=this._sortBy(t.data,"comments.count",p);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}if("undefined"!=typeof document&&null!==document&&this.options.mock===!1){if(l=t.data,null!=this.options.limit&&l.length>this.options.limit&&(l=l.slice(0,this.options.limit+1||9e9)),n=document.createDocumentFragment(),null!=this.options.filter&&"function"==typeof this.options.filter&&(l=this._filter(l,this.options.filter)),null!=this.options.template&&"string"==typeof this.options.template){for(r="",s="",u="",m=document.createElement("div"),g=0,w=l.length;w>g;g++)i=l[g],a=i.images[this.options.resolution].url,this.options.useHttp||(a=a.replace("http://","//")),s=this._makeTemplate(this.options.template,{model:i,id:i.id,link:i.link,image:a,caption:this._getObjectProperty(i,"caption.text"),likes:i.likes.count,comments:i.comments.count,location:this._getObjectProperty(i,"location.name")}),r+=s;for(m.innerHTML=r,k=[].slice.call(m.childNodes),v=0,b=k.length;b>v;v++)h=k[v],n.appendChild(h)}else for(y=0,T=l.length;T>y;y++)i=l[y],c=document.createElement("img"),a=i.images[this.options.resolution].url,this.options.useHttp||(a=a.replace("http://","//")),c.src=a,this.options.links===!0?(e=document.createElement("a"),e.href=i.link,e.appendChild(c),n.appendChild(e)):n.appendChild(c);document.getElementById(this.options.target).appendChild(n),o=document.getElementsByTagName("head")[0],o.removeChild(document.getElementById("instafeed-fetcher")),f="instafeedCache"+this.unique,window[f]=void 0;try{delete window[f]}catch(x){}}return null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),!0},t.prototype._buildUrl=function(){var t,e,n;switch(t="https://api.instagram.com/v1",this.options.get){case"popular":e="media/popular";break;case"tagged":if("string"!=typeof this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");e="tags/"+this.options.tagName+"/media/recent";break;case"location":if("number"!=typeof this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");e="locations/"+this.options.locationId+"/media/recent";break;case"user":if("number"!=typeof this.options.userId)throw new Error("No user specified. Use the 'userId' option.");if("string"!=typeof this.options.accessToken)throw new Error("No access token. Use the 'accessToken' option.");e="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return n=""+t+"/"+e,n+=null!=this.options.accessToken?"?access_token="+this.options.accessToken:"?client_id="+this.options.clientId,null!=this.options.limit&&(n+="&count="+this.options.limit),n+="&callback=instafeedCache"+this.unique+".parse"},t.prototype._genKey=function(){var t;return t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},""+t()+t()+t()+t()},t.prototype._makeTemplate=function(t,e){var n,o,r,i,s;for(o=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,n=t;o.test(n);)r=n.match(o)[1],i=null!=(s=this._getObjectProperty(e,r))?s:"",n=n.replace(o,""+i);return n},t.prototype._getObjectProperty=function(t,e){var n,o;for(e=e.replace(/\[(\w+)\]/g,".$1"),o=e.split(".");o.length;){if(n=o.shift(),!(null!=t&&n in t))return null;t=t[n]}return t},t.prototype._sortBy=function(t,e,n){var o;return o=function(t,o){var r,i;return r=this._getObjectProperty(t,e),i=this._getObjectProperty(o,e),n?r>i?1:-1:i>r?1:-1},t.sort(o.bind(this)),t},t.prototype._filter=function(t,e){var n,o,r,i,s;for(n=[],r=function(t){return e(t)?n.push(t):void 0},i=0,s=t.length;s>i;i++)o=t[i],r(o);return n},t}(),e="undefined"!=typeof exports&&null!==exports?exports:window,e.Instafeed=t}.call(this),function(t,e,n){"use strict";function o(n){if(r=e.documentElement,i=e.body,R(),ae=this,n=n||{},he=n.constants||{},n.easing)for(var o in n.easing)G[o]=n.easing[o];we=n.edgeStrategy||"set",ue={beforerender:n.beforerender,render:n.render,keyframe:n.keyframe},fe=n.forceHeight!==!1,fe&&(Be=n.scale||1),pe=n.mobileDeceleration||S,me=n.smoothScrolling!==!1,ge=n.smoothScrollingDuration||_,ve={targetTop:ae.getScrollTop()},Le=(n.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||t.opera)})(),Le?(ce=e.getElementById(n.skrollrBody||E),ce&&se(),Y(),Fe(r,[y,T],[w])):Fe(r,[y,b],[w]),ae.refresh(),ke(t,"resize orientationchange",function(){var t=r.clientWidth,e=r.clientHeight;(e!==qe||t!==Ue)&&(qe=e,Ue=t,Me=!0)});var s=W();return function a(){X(),Te=s(a)}(),ae}var r,i,s={get:function(){return ae},init:function(t){return ae||new o(t)},VERSION:"0.6.29"},a=Object.prototype.hasOwnProperty,l=t.Math,c=t.getComputedStyle,u="touchstart",f="touchmove",h="touchcancel",p="touchend",d="skrollable",m=d+"-before",g=d+"-between",v=d+"-after",y="skrollr",w="no-"+y,b=y+"-desktop",T=y+"-mobile",k="linear",x=1e3,S=.004,E="skrollr-body",_=200,I="start",z="end",O="center",F="bottom",N="___skrollable_id",A=/^(?:input|textarea|button|select)$/i,C=/^\s+|\s+$/g,H=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,B=/\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,D=/^(@?[a-z\-]+)\[(\w+)\]$/,P=/-([a-z0-9_])/g,j=function(t,e){return e.toUpperCase()},U=/[\-+]?[\d]*\.?[\d]+/g,$=/\{\?\}/g,q=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,M=/[a-z\-]+-gradient/g,V="",L="",R=function(){var t=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(c){var e=c(i,null);for(var o in e)if(V=o.match(t)||+o==o&&e[o].match(t))break;if(!V)return V=L="",n;V=V[0],"-"===V.slice(0,1)?(L=V,V={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[V]):L="-"+V.toLowerCase()+"-"}},W=function(){var e=t.requestAnimationFrame||t[V.toLowerCase()+"RequestAnimationFrame"],n=$e();return(Le||!e)&&(e=function(e){var o=$e()-n,r=l.max(0,1e3/60-o);return t.setTimeout(function(){n=$e(),e()},r)}),e},K=function(){var e=t.cancelAnimationFrame||t[V.toLowerCase()+"CancelAnimationFrame"];return(Le||!e)&&(e=function(e){return t.clearTimeout(e)}),e},G={begin:function(){return 0},end:function(){return 1},linear:function(t){return t},quadratic:function(t){return t*t},cubic:function(t){return t*t*t},swing:function(t){return-l.cos(t*l.PI)/2+.5},sqrt:function(t){return l.sqrt(t)},outCubic:function(t){return l.pow(t-1,3)+1},bounce:function(t){var e;if(.5083>=t)e=3;else if(.8489>=t)e=9;else if(.96208>=t)e=27;else{if(!(.99981>=t))return 1;e=91}return 1-l.abs(3*l.cos(1.028*t*e)/e)}};o.prototype.refresh=function(t){var o,r,i=!1;for(t===n?(i=!0,le=[],Ve=0,t=e.getElementsByTagName("*")):t.length===n&&(t=[t]),o=0,r=t.length;r>o;o++){var s=t[o],a=s,l=[],c=me,u=we,f=!1;if(i&&N in s&&delete s[N],s.attributes){for(var h=0,p=s.attributes.length;p>h;h++){var m=s.attributes[h];if("data-anchor-target"!==m.name)if("data-smooth-scrolling"!==m.name)if("data-edge-strategy"!==m.name)if("data-emit-events"!==m.name){var g=m.name.match(H);if(null!==g){var v={props:m.value,element:s,eventType:m.name.replace(P,j)};l.push(v);var y=g[1];y&&(v.constant=y.substr(1));var w=g[2];/p$/.test(w)?(v.isPercentage=!0,v.offset=(0|w.slice(0,-1))/100):v.offset=0|w;var b=g[3],T=g[4]||b;b&&b!==I&&b!==z?(v.mode="relative",v.anchors=[b,T]):(v.mode="absolute",b===z?v.isEnd=!0:v.isPercentage||(v.offset=v.offset*Be))}}else f=!0;else u=m.value;else c="off"!==m.value;else if(a=e.querySelector(m.value),null===a)throw'Unable to find anchor target "'+m.value+'"'}if(l.length){var k,x,S;!i&&N in s?(S=s[N],k=le[S].styleAttr,x=le[S].classAttr):(S=s[N]=Ve++,k=s.style.cssText,x=Oe(s)),le[S]={element:s,styleAttr:k,classAttr:x,anchorTarget:a,keyFrames:l,smoothScrolling:c,edgeStrategy:u,emitEvents:f,lastFrameIndex:-1},Fe(s,[d],[])}}}for(_e(),o=0,r=t.length;r>o;o++){var E=le[t[o][N]];E!==n&&(Z(E),ee(E))}return ae},o.prototype.relativeToAbsolute=function(t,e,n){var o=r.clientHeight,i=t.getBoundingClientRect(),s=i.top,a=i.bottom-i.top;return e===F?s-=o:e===O&&(s-=o/2),n===F?s+=a:n===O&&(s+=a/2),s+=ae.getScrollTop(),0|s+.5},o.prototype.animateTo=function(t,e){e=e||{};var o=$e(),r=ae.getScrollTop();return de={startTop:r,topDiff:t-r,targetTop:t,duration:e.duration||x,startTime:o,endTime:o+(e.duration||x),easing:G[e.easing||k],done:e.done},de.topDiff||(de.done&&de.done.call(ae,!1),de=n),ae},o.prototype.stopAnimateTo=function(){de&&de.done&&de.done.call(ae,!0),de=n},o.prototype.isAnimatingTo=function(){return!!de},o.prototype.isMobile=function(){return Le},o.prototype.setScrollTop=function(e,n){return ye=n===!0,Le?Re=l.min(l.max(e,0),He):t.scrollTo(0,e),ae},o.prototype.getScrollTop=function(){return Le?Re:t.pageYOffset||r.scrollTop||i.scrollTop||0},o.prototype.getMaxScrollTop=function(){return He},o.prototype.on=function(t,e){return ue[t]=e,ae},o.prototype.off=function(t){return delete ue[t],ae},o.prototype.destroy=function(){var t=K();t(Te),Se(),Fe(r,[w],[y,b,T]);for(var e=0,o=le.length;o>e;e++)ie(le[e].element);r.style.overflow=i.style.overflow="",r.style.height=i.style.height="",ce&&s.setStyle(ce,"transform","none"),ae=n,ce=n,ue=n,fe=n,He=0,Be=1,he=n,pe=n,De="down",Pe=-1,Ue=0,qe=0,Me=!1,de=n,me=n,ge=n,ve=n,ye=n,Ve=0,we=n,Le=!1,Re=0,be=n};var Y=function(){var o,s,a,c,d,m,g,v,y,w,b,T;ke(r,[u,f,h,p].join(" "),function(t){var r=t.changedTouches[0];for(c=t.target;3===c.nodeType;)c=c.parentNode;switch(d=r.clientY,m=r.clientX,w=t.timeStamp,A.test(c.tagName)||t.preventDefault(),t.type){case u:o&&o.blur(),ae.stopAnimateTo(),o=c,s=g=d,a=m,y=w;break;case f:A.test(c.tagName)&&e.activeElement!==c&&t.preventDefault(),v=d-g,T=w-b,ae.setScrollTop(Re-v,!0),g=d,b=w;break;default:case h:case p:var i=s-d,k=a-m,x=k*k+i*i;if(49>x){if(!A.test(o.tagName)){o.focus();var S=e.createEvent("MouseEvents");S.initMouseEvent("click",!0,!0,t.view,1,r.screenX,r.screenY,r.clientX,r.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),o.dispatchEvent(S)}return}o=n;var E=v/T;E=l.max(l.min(E,3),-3);var _=l.abs(E/pe),I=E*_+.5*pe*_*_,z=ae.getScrollTop()-I,O=0;z>He?(O=(He-z)/I,z=He):0>z&&(O=-z/I,z=0),_*=1-O,ae.animateTo(0|z+.5,{easing:"outCubic",duration:_})}}),t.scrollTo(0,0),r.style.overflow=i.style.overflow="hidden"},J=function(){var t,e,n,o,i,s,a,c,u,f,h,p=r.clientHeight,d=Ie();for(c=0,u=le.length;u>c;c++)for(t=le[c],e=t.element,n=t.anchorTarget,o=t.keyFrames,i=0,s=o.length;s>i;i++)a=o[i],f=a.offset,h=d[a.constant]||0,a.frame=f,a.isPercentage&&(f*=p,a.frame=f),"relative"===a.mode&&(ie(e),a.frame=ae.relativeToAbsolute(n,a.anchors[0],a.anchors[1])-f,ie(e,!0)),a.frame+=h,fe&&!a.isEnd&&a.frame>He&&(He=a.frame);for(He=l.max(He,ze()),c=0,u=le.length;u>c;c++){for(t=le[c],o=t.keyFrames,i=0,s=o.length;s>i;i++)a=o[i],h=d[a.constant]||0,a.isEnd&&(a.frame=He-a.offset+h);t.keyFrames.sort(Ce)}},Q=function(t,e){for(var n=0,o=le.length;o>n;n++){var r,i,l=le[n],c=l.element,u=l.smoothScrolling?t:e,f=l.keyFrames,h=f.length,p=f[0],y=f[f.length-1],w=p.frame>u,b=u>y.frame,T=w?p:y,k=l.emitEvents,x=l.lastFrameIndex;if(w||b){if(w&&-1===l.edge||b&&1===l.edge)continue;switch(w?(Fe(c,[m],[v,g]),k&&x>-1&&(Ee(c,p.eventType,De),l.lastFrameIndex=-1)):(Fe(c,[v],[m,g]),k&&h>x&&(Ee(c,y.eventType,De),l.lastFrameIndex=h)),l.edge=w?-1:1,l.edgeStrategy){case"reset":ie(c);continue;case"ease":u=T.frame;break;default:case"set":var S=T.props;for(r in S)a.call(S,r)&&(i=re(S[r].value),0===r.indexOf("@")?c.setAttribute(r.substr(1),i):s.setStyle(c,r,i));continue}}else 0!==l.edge&&(Fe(c,[d,g],[m,v]),l.edge=0);for(var E=0;h-1>E;E++)if(u>=f[E].frame&&f[E+1].frame>=u){var _=f[E],I=f[E+1];for(r in _.props)if(a.call(_.props,r)){var z=(u-_.frame)/(I.frame-_.frame);z=_.props[r].easing(z),i=oe(_.props[r].value,I.props[r].value,z),i=re(i),0===r.indexOf("@")?c.setAttribute(r.substr(1),i):s.setStyle(c,r,i)}k&&x!==E&&("down"===De?Ee(c,_.eventType,De):Ee(c,I.eventType,De),l.lastFrameIndex=E);break}}},X=function(){Me&&(Me=!1,_e());var t,e,o=ae.getScrollTop(),r=$e();if(de)r>=de.endTime?(o=de.targetTop,t=de.done,de=n):(e=de.easing((r-de.startTime)/de.duration),o=0|de.startTop+e*de.topDiff),ae.setScrollTop(o,!0);else if(!ye){var i=ve.targetTop-o;i&&(ve={startTop:Pe,topDiff:o-Pe,targetTop:o,startTime:je,endTime:je+ge}),ve.endTime>=r&&(e=G.sqrt((r-ve.startTime)/ge),o=0|ve.startTop+e*ve.topDiff)}if(Le&&ce&&s.setStyle(ce,"transform","translate(0, "+-Re+"px) "+be),ye||Pe!==o){De=o>Pe?"down":Pe>o?"up":De,ye=!1;var a={curTop:o,lastTop:Pe,maxTop:He,direction:De},l=ue.beforerender&&ue.beforerender.call(ae,a);l!==!1&&(Q(o,ae.getScrollTop()),Pe=o,ue.render&&ue.render.call(ae,a)),t&&t.call(ae,!1)}je=r},Z=function(t){for(var e=0,n=t.keyFrames.length;n>e;e++){for(var o,r,i,s,a=t.keyFrames[e],l={};null!==(s=B.exec(a.props));)i=s[1],r=s[2],o=i.match(D),null!==o?(i=o[1],o=o[2]):o=k,r=r.indexOf("!")?te(r):[r.slice(1)],l[i]={value:r,easing:G[o]};a.props=l}},te=function(t){var e=[];return q.lastIndex=0,t=t.replace(q,function(t){return t.replace(U,function(t){return 100*(t/255)+"%"})}),L&&(M.lastIndex=0,t=t.replace(M,function(t){return L+t})),t=t.replace(U,function(t){return e.push(+t),"{?}"}),e.unshift(t),e},ee=function(t){var e,n,o={};for(e=0,n=t.keyFrames.length;n>e;e++)ne(t.keyFrames[e],o);for(o={},e=t.keyFrames.length-1;e>=0;e--)ne(t.keyFrames[e],o)},ne=function(t,e){var n;for(n in e)a.call(t.props,n)||(t.props[n]=e[n]);for(n in t.props)e[n]=t.props[n]},oe=function(t,e,n){var o,r=t.length;if(r!==e.length)throw"Can't interpolate between \""+t[0]+'" and "'+e[0]+'"';var i=[t[0]];for(o=1;r>o;o++)i[o]=t[o]+(e[o]-t[o])*n;return i},re=function(t){var e=1;return $.lastIndex=0,t[0].replace($,function(){return t[e++]})},ie=function(t,e){t=[].concat(t);for(var n,o,r=0,i=t.length;i>r;r++)o=t[r],n=le[o[N]],n&&(e?(o.style.cssText=n.dirtyStyleAttr,Fe(o,n.dirtyClassAttr)):(n.dirtyStyleAttr=o.style.cssText,n.dirtyClassAttr=Oe(o),o.style.cssText=n.styleAttr,Fe(o,n.classAttr)))},se=function(){be="translateZ(0)",s.setStyle(ce,"transform",be);var t=c(ce),e=t.getPropertyValue("transform"),n=t.getPropertyValue(L+"transform"),o=e&&"none"!==e||n&&"none"!==n;o||(be="")};s.setStyle=function(t,e,n){var o=t.style;if(e=e.replace(P,j).replace("-",""),"zIndex"===e)o[e]=isNaN(n)?n:""+(0|n);else if("float"===e)o.styleFloat=o.cssFloat=n;else try{V&&(o[V+e.slice(0,1).toUpperCase()+e.slice(1)]=n),o[e]=n}catch(r){}};var ae,le,ce,ue,fe,he,pe,de,me,ge,ve,ye,we,be,Te,ke=s.addEvent=function(e,n,o){var r=function(e){return e=e||t.event,e.target||(e.target=e.srcElement),e.preventDefault||(e.preventDefault=function(){e.returnValue=!1,e.defaultPrevented=!0}),o.call(this,e)};n=n.split(" ");for(var i,s=0,a=n.length;a>s;s++)i=n[s],e.addEventListener?e.addEventListener(i,o,!1):e.attachEvent("on"+i,r),We.push({element:e,name:i,listener:o})},xe=s.removeEvent=function(t,e,n){e=e.split(" ");for(var o=0,r=e.length;r>o;o++)t.removeEventListener?t.removeEventListener(e[o],n,!1):t.detachEvent("on"+e[o],n)},Se=function(){for(var t,e=0,n=We.length;n>e;e++)t=We[e],xe(t.element,t.name,t.listener);We=[]},Ee=function(t,e,n){ue.keyframe&&ue.keyframe.call(ae,t,e,n)},_e=function(){var t=ae.getScrollTop();He=0,fe&&!Le&&(i.style.height=""),J(),fe&&!Le&&(i.style.height=He+r.clientHeight+"px"),Le?ae.setScrollTop(l.min(ae.getScrollTop(),He)):ae.setScrollTop(t,!0),ye=!0},Ie=function(){var t,e,n=r.clientHeight,o={};for(t in he)e=he[t],"function"==typeof e?e=e.call(ae):/p$/.test(e)&&(e=e.slice(0,-1)/100*n),o[t]=e;return o},ze=function(){var t,e=0;return ce&&(e=l.max(ce.offsetHeight,ce.scrollHeight)),t=l.max(e,i.scrollHeight,i.offsetHeight,r.scrollHeight,r.offsetHeight,r.clientHeight),t-r.clientHeight},Oe=function(e){var n="className";return t.SVGElement&&e instanceof t.SVGElement&&(e=e[n],n="baseVal"),e[n]},Fe=function(e,o,r){var i="className";if(t.SVGElement&&e instanceof t.SVGElement&&(e=e[i],i="baseVal"),r===n)return e[i]=o,n;for(var s=e[i],a=0,l=r.length;l>a;a++)s=Ae(s).replace(Ae(r[a])," ");s=Ne(s);for(var c=0,u=o.length;u>c;c++)-1===Ae(s).indexOf(Ae(o[c]))&&(s+=" "+o[c]);e[i]=Ne(s)},Ne=function(t){return t.replace(C,"")},Ae=function(t){return" "+t+" "},$e=Date.now||function(){return+new Date},Ce=function(t,e){return t.frame-e.frame},He=0,Be=1,De="down",Pe=-1,je=$e(),Ue=0,qe=0,Me=!1,Ve=0,Le=!1,Re=0,We=[];"function"==typeof define&&define.amd?define([],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:t.skrollr=s}(window,document);